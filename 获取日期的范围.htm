<!--
 * @Date: 2019-12-06 20:35:33
 * @Author: 李凯
 * @LastEditors: 李凯
 * @LastEditTime: 2019-12-06 20:36:38
 * @Description: 
 * @FilePath: /javascript/获取日期的范围.htm
 -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>

</html>
<script>
    var now = new Date(); //当前日期
    var nowDayOfWeek = now.getDay(); //今天本周的第几天
    var nowDay = now.getDate(); //当前日
    var nowMonth = now.getMonth(); //当前月
    var nowYear = now.getYear(); //当前年
    nowYear += (nowYear < 2000) ? 1900 : 0; // var lastMonthDate=new Date(); //上月日期 lastMonthDate.setDate(1);
    lastMonthDate.setMonth(lastMonthDate.getMonth() - 1);
    var lastYear = lastMonthDate.getYear();
    var
        lastMonth = lastMonthDate.getMonth(); //格式化日期：yyyy-MM-dd 
    function formatDate(date) {
        var myyear = date.getFullYear();
        var mymonth = date.getMonth() + 1;
        var myweekday = date.getDate();
        if (mymonth < 10) {
            mymonth = "0" + mymonth;
        }
        if (myweekday < 10) {
            myweekday = "0" + myweekday;
        }
        return (myyear + "-" + mymonth + "-" + myweekday);
    } //获得某月的天数
    function getMonthDays(myMonth) {
        var monthStartDate = new Date(nowYear, myMonth, 1);
        var monthEndDate = new
        Date(nowYear, myMonth + 1, 1);
        var days = (monthEndDate - monthStartDate) / (1000 * 60 * 60 * 24);
        return days;
    } //获得本季度的开始月份 
    function getQuarterStartMonth() {
        var quarterStartMonth = 0;
        if (nowMonth < 3) {
            quarterStartMonth = 0;
        }
        if (2 < nowMonth && nowMonth < 6) {
            quarterStartMonth = 3;
        }
        if (5 < nowMonth && nowMonth < 9) {
            quarterStartMonth = 6;
        }
        if (nowMonth > 8) {
            quarterStartMonth = 9;
        }
        return quarterStartMonth;
    }
    //获得本周的开始日期
    function getWeekStartDate() {
        var weekStartDate = new Date(nowYear, nowMonth, nowDay - nowDayOfWeek);
        return formatDate(weekStartDate);
    }
    //获得本周的结束日期
    function getWeekEndDate() {
        var weekEndDate = new Date(nowYear, nowMonth, nowDay + (6 - nowDayOfWeek));
        return formatDate(weekEndDate);
    }
    //获得上周的开始日期
    function getLastWeekStartDate() {
        var weekStartDate = new Date(nowYear, nowMonth, nowDay - nowDayOfWeek - 7);
        return formatDate(weekStartDate);
    }
    //获得上周的结束日期
    function getLastWeekEndDate() {
        var weekEndDate = new Date(nowYear, nowMonth, nowDay - nowDayOfWeek - 1);
        return formatDate(weekEndDate);
    }
    //获得本月的开始日期
    function getMonthStartDate() {
        var monthStartDate = new Date(nowYear, nowMonth, 1);
        return formatDate(monthStartDate);
    }
    //获得本月的结束日期
    function getMonthEndDate() {
        var monthEndDate = new Date(nowYear, nowMonth, getMonthDays(nowMonth));
        return formatDate(monthEndDate);
    }
    //获得上月开始时间
    function getLastMonthStartDate() {
        var lastMonthStartDate = new Date(nowYear, lastMonth, 1);
        return formatDate(lastMonthStartDate);
    }
    //获得上月结束时间
    function getLastMonthEndDate() {
        var lastMonthEndDate = new Date(nowYear, lastMonth, getMonthDays(lastMonth));
        return formatDate(lastMonthEndDate);
    }
    //获得本季度的开始日期
    function getQuarterStartDate() {
        var quarterStartDate = new Date(nowYear, getQuarterStartMonth(), 1);
        return formatDate(quarterStartDate);
    }
    //或的本季度的结束日期
    function getQuarterEndDate() {
        var quarterEndMonth = getQuarterStartMonth() + 2;
        var quarterStartDate = new Date(nowYear, quarterEndMonth,
            getMonthDays(quarterEndMonth));
        return formatDate(quarterStartDate);
    }
    //时间日期转化为多少小时（分钟）前 例如本项目中：2015-07-02 17:55:46 =》16小时前
    function datetimeToAgo(t) {
        var date = t;
        date = new Date(Date.parse(date.replace(/-/g, "/")));
        var date_get = date.getTime();
        var date_cur = new Date().getTime()
        var ttime01 = (date_cur - date_get) / 1000;
        var ttime = "";
        if (ttime01 <= 60) {
            ttime = "刚刚";
        } else if ((ttime01) / 60 > 1 && (ttime01) / 60 <= 60) {
            ttime = Math.round((ttime01) / 60) + '分钟前';
        } else if ((ttime01) / 60 / 60 > 1 && (ttime01) / 60 / 60 <= 24) {
            ttime = Math.round((ttime01) / 60 / 60) + '小时前';
        } else
        if ((ttime01) / 60 / 60 / 24 > 1 && (ttime01) / 60 / 60 / 24 <= 30) {
            ttime = Math.round((ttime01) / 60 / 60 / 24) + '天前';
        } else
        if ((ttime01) / 60 / 60 / 24 / 30 > 1 && (ttime01) / 60 / 60 / 24 / 30 <= 12) {
            ttime = Math.round((ttime01) / 60 / 60 / 24 / 30) + '月前';
        } else
        if ((ttime01) / 60 / 60 / 24 / 30 / 12 > 1) {
            ttime = Math.round((ttime01) / 60 / 60 / 24 / 30 / 12) + '年前';
        }
        return ttime;
    }
</script>